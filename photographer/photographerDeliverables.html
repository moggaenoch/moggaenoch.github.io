<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Placeholder</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<h1>Placeholder</h1>
<p>Auto-generated placeholder for missing page: pages/photographer/photographer-deliverables.html</p>
<p>Referenced 1 times.</p>
<p><a href="index.html">Home</a></p>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<div class="container py-4">
  <h1 class="h4">Deliverables</h1>
  <p class="text-muted">Uploads are shown here after you attach them to jobs. Media may require admin approval.</p>
  <div id="deliverablesList" class="mt-3"></div>
</div>

  <script src="assets/js/config.js"></script>
  <script src="assets/js/http.js"></script>
  <script src="assets/js/nav-areas.js"></script>
  <script src="assets/js/photographer.js"></script>
  <script src="assets/js/photojobs.js"></script>
  <script>
          Photographer.loadCounts();
          (async ()=>{
            const el = document.getElementById("deliverablesList");
            try{
              const r = await apiFetch("/photo-jobs/deliverables?limit=50", { auth:true });
              const items = r?.data?.items || r?.items || [];
              el.innerHTML = items.map(d => `
                <div class="border rounded p-2 mb-2">
                  <div class="small text-muted">${d.created_at || ""} â€¢ Job ${d.job_code || d.job_id}</div>
                  <div><a href="${window.CONFIG.API_ORIGIN}${d.url}" target="_blank" rel="noopener">${d.filename || "file"}</a>
                    <span class="badge text-bg-${d.status==='approved'?'success':(d.status==='rejected'?'danger':'warning')} ms-2">${d.status||"pending"}</span>
                  </div>
                </div>
              `).join("") || `<div class="text-muted">No deliverables yet.</div>`;
            }catch(e){
              el.innerHTML = `<div class="text-muted">Unable to load deliverables.</div>`;
            }
          })();
        </script>
</body>
</html>
