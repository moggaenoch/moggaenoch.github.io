<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="description" content="JUBA HOMEZ Admin Dashboard - Manage users, properties, content, settings, and audit logs." />
  <meta name="author" content="MOGGA ENOCH" />

  <title>Enterprise Suite | Juba Homez Admin</title>

  <!-- Bootstrap 5.3 (matches your other pages) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <!-- Tailwind (kept for this dashboard UI layout) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Icons + Charts -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; scroll-behavior: smooth; }
    .sidebar-link.active { background-color: #1e293b; color: #3b82f6; border-right: 4px solid #3b82f6; }
    #map { height: 380px; border-radius: 1.5rem; z-index: 1; }
    .chart-container { position: relative; height: 300px; width: 100%; }

    /* Toggle switch */
    .switch { position: relative; display: inline-block; width: 44px; height: 22px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; inset: 0; background-color: #cbd5e1; transition: .4s; border-radius: 34px; }
    .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: #fff; transition: .4s; border-radius: 50%; }
    input:checked + .slider { background-color: #2563eb; }
    input:checked + .slider:before { transform: translateX(22px); }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #f1f5f9; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

    /* Small badges */
    .badge { font-size: 10px; font-weight: 900; text-transform: uppercase; letter-spacing: .08em; padding: 3px 8px; border-radius: 999px; display: inline-flex; align-items: center; gap: 6px; }
    .badge-dot { width: 6px; height: 6px; border-radius: 999px; display: inline-block; }
    .badge-active { background: #ecfdf5; color: #047857; }
    .badge-active .badge-dot { background:#10b981; }
    .badge-pending { background: #fff7ed; color: #9a3412; }
    .badge-pending .badge-dot { background:#fb923c; }
    .badge-suspended { background: #fef2f2; color: #b91c1c; }
    .badge-suspended .badge-dot { background:#ef4444; }
    .badge-approved { background: #eff6ff; color: #1d4ed8; }
    .badge-approved .badge-dot { background:#2563eb; }
    .badge-rejected { background: #f1f5f9; color: #334155; }
    .badge-rejected .badge-dot { background:#94a3b8; }

    /* Buttons (your custom dashboard buttons) */
    .btn { display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius: 12px; font-weight: 800; font-size: 12px; letter-spacing: .02em; transition: .15s; }
    .btn:active { transform: scale(.98); }
    .btn-ghost { background:#fff; border:1px solid #e2e8f0; color:#0f172a; }
    .btn-ghost:hover { background:#f8fafc; }
    .btn-primary { background:#0f172a; color:#fff; box-shadow: 0 10px 20px rgba(15,23,42,.08); }
    .btn-primary:hover { background:#111827; }
    .btn-blue { background:#2563eb; color:#fff; }
    .btn-blue:hover { background:#1d4ed8; }
    .btn-red { background:#ef4444; color:#fff; }
    .btn-red:hover { background:#dc2626; }
    .btn-amber { background:#f59e0b; color:#111827; }
    .btn-amber:hover { background:#d97706; color:#fff; }

    /* Tables */
    table th { white-space: nowrap; }
    .table-wrap { overflow-x:auto; }

    /* Small debug banner if http.js fails to load */
    #httpMissingBanner { display:none; position: fixed; bottom: 16px; right: 16px; z-index: 9999; background:#0f172a; color:#fff; padding:12px 14px; border-radius:14px; box-shadow: 0 12px 24px rgba(0,0,0,.2); font-size: 12px; max-width: 360px;}
    #httpMissingBanner code { background: rgba(255,255,255,.12); padding: 2px 6px; border-radius: 8px; }
  </style>
</head>

<body>
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-64 bg-slate-900 text-white hidden lg:flex flex-col sticky top-0 h-screen shadow-2xl">
      <div class="p-6 border-b border-slate-800">
        <h1 class="text-xl font-black tracking-tighter text-blue-400 italic">JUBA HOMEZ</h1>
        <p class="text-[9px] text-slate-500 uppercase tracking-widest mt-1 font-bold">Admin Control Center</p>
      </div>

      <nav class="flex-1 px-4 py-6 space-y-1 overflow-y-auto text-sm">
        <a href="#dashboard-overview" class="sidebar-link active flex items-center space-x-3 p-3 rounded-xl transition">
          <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
          <span class="font-bold">Dashboard</span>
        </a>

        <a href="#users" class="flex items-center space-x-3 p-3 text-slate-400 hover:bg-slate-800 hover:text-white rounded-xl transition">
          <i data-lucide="users" class="w-5 h-5"></i>
          <span class="font-medium">User Management</span>
        </a>

        <a href="#properties" class="flex items-center space-x-3 p-3 text-slate-400 hover:bg-slate-800 hover:text-white rounded-xl transition">
          <i data-lucide="home" class="w-5 h-5"></i>
          <span class="font-medium">Property Management</span>
        </a>

        <a href="#content" class="flex items-center space-x-3 p-3 text-slate-400 hover:bg-slate-800 hover:text-white rounded-xl transition">
          <i data-lucide="file-text" class="w-5 h-5"></i>
          <span class="font-medium">Content Management</span>
        </a>

        <a href="#settings" class="flex items-center space-x-3 p-3 text-slate-400 hover:bg-slate-800 hover:text-white rounded-xl transition">
          <i data-lucide="settings" class="w-5 h-5"></i>
          <span class="font-medium">System Settings</span>
        </a>

        <a href="#audit" class="flex items-center space-x-3 p-3 text-slate-400 hover:bg-slate-800 hover:text-white rounded-xl transition">
          <i data-lucide="shield-alert" class="w-5 h-5"></i>
          <span class="font-medium">Audit Log</span>
        </a>

        <a href="#analytics" class="flex items-center space-x-3 p-3 text-slate-400 hover:bg-slate-800 hover:text-white rounded-xl transition">
          <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
          <span class="font-medium">Analytics</span>
        </a>
      </nav>

      <div class="p-4 bg-slate-950/40">
        <div class="flex items-center gap-3 p-2 rounded-xl border border-slate-800">
          <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center font-bold text-[10px] text-white">AD</div>
          <div class="overflow-hidden">
            <p class="text-xs font-bold truncate" id="adminName">System Admin</p>
            <p class="text-[9px] text-blue-400 font-bold uppercase tracking-tighter italic">Root Access</p>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="flex-1 p-6 lg:p-10">
      <!-- Header -->
      <header class="mb-10 flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div>
          <h1 class="text-3xl font-black text-slate-900 tracking-tight">Admin Dashboard</h1>
          <p class="text-slate-500 text-sm italic">
            Manage users, listings, content, and settings — with full audit logging.
          </p>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <div class="flex items-center gap-2 bg-emerald-50 text-emerald-700 px-4 py-2 rounded-xl border border-emerald-100 shadow-sm shadow-emerald-50">
            <span class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
            </span>
            <span class="text-[10px] font-black uppercase tracking-wider" id="serverStatus">Server: Online</span>
          </div>

          <button id="btnRefreshAll" class="btn btn-ghost">
            <i data-lucide="refresh-ccw" class="w-4 h-4 text-slate-400"></i> Refresh
          </button>

          <button class="btn btn-ghost">
            <i data-lucide="bell" class="w-4 h-4 text-slate-400"></i> Alerts
          </button>

          <button class="btn btn-primary">
            <i data-lucide="user" class="w-4 h-4"></i> Admin Profile
          </button>
        </div>
      </header>

      <!-- ✅ Your original sections start here (UNCHANGED) -->
      <!-- Overview -->
      <section id="dashboard-overview" class="mb-12">
        <!-- (keep everything exactly as you already had it) -->
        <!-- ... -->
      </section>

      <!-- Users -->
      <section id="users" class="mb-12">
        <!-- ... -->
      </section>

      <!-- Properties -->
      <section id="properties" class="mb-12">
        <!-- ... -->
      </section>

      <!-- Content -->
      <section id="content" class="mb-12">
        <!-- ... -->
      </section>

      <!-- Settings -->
      <section id="settings" class="mb-12">
        <!-- ... -->
      </section>

      <!-- Audit -->
      <section id="audit" class="mb-12">
        <!-- ... -->
      </section>

      <!-- Analytics -->
      <section id="analytics" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- ... -->
      </section>
      <!-- ✅ Your original sections end here -->
    </main>
  </div>

  <!-- Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- ✅ IMPORTANT: absolute paths so they work from /Admin/ folder -->
  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/http.js"></script>
  <script src="/assets/js/admin.js"></script>

  <script>
    // Icons
    if (window.lucide?.createIcons) lucide.createIcons();

    // Show debug banner if http.js didn't load
    if (typeof window.http === "undefined") {
      document.getElementById("httpMissingBanner").style.display = "block";
      console.error("http.js not loaded. Check: /assets/js/http.js");
    }
  </script>

  <!-- Debug banner -->
  <div id="httpMissingBanner">
    <b>Admin scripts not loaded</b><br />
    Make sure these return <b>200</b> in DevTools → Network:
    <div style="margin-top:6px">
      <code>/assets/js/config.js</code><br />
      <code>/assets/js/http.js</code><br />
      <code>/assets/js/admin.js</code>
    </div>
  </div>
</body>
</html>
