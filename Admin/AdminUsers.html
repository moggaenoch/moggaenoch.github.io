<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>User & Role Management | Juba Homez Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <style>
    :root { --sidebar-width: 80px; }
    body { background-color: #f8f9fa; min-height: 100vh; overflow-x: hidden; }
    .app-wrapper { display: flex; min-height: 100vh; }
    
    /* Global Sidebar Navigation (Standardized JH Shell) */
    .sidebar { width: var(--sidebar-width); background: #212529; display: flex; flex-direction: column; align-items: center; padding-top: 20px; flex-shrink: 0; position: fixed; height: 100vh; z-index: 1030; }
    .sidebar a { color: #adb5bd; margin: 20px 0; font-size: 1.4rem; transition: 0.2s; position: relative; }
    .sidebar a:hover, .sidebar a.active { color: #0d6efd; }
    .main-content { margin-left: var(--sidebar-width); flex-grow: 1; padding: 30px; }

    /* User Table UI */
    .user-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; background: #e9ecef; }
    .role-badge { font-size: 0.75rem; padding: 4px 10px; font-weight: 600; text-transform: uppercase; }
    .status-active { color: #198754; background: #e8f5e9; }
    .status-suspended { color: #dc3545; background: #fdf2f2; }
    
    /* Stats Bar */
    .stat-mini-card { background: #fff; border-radius: 10px; padding: 15px; border: 1px solid #e9ecef; }
    
    .table-hover tbody tr { cursor: pointer; transition: 0.1s; }
    .bulk-action-bar { position: sticky; top: 0; z-index: 1020; background: #0d6efd; color: #fff; padding: 10px 20px; border-radius: 8px; margin-bottom: 20px; display: none; }
  </style>
</head>
<body>

<div class="app-wrapper">
    <aside class="sidebar">
        <span class="fw-bold text-primary fs-4 mb-4">JH</span>
        <a href="AdminDashboard.html" title="Dashboard"><i class="bi bi-speedometer2"></i></a>
        <a href="AdminListingPending.html" title="Listings"><i class="bi bi-card-list"></i></a>
        <a href="AdminMessages.html" title="Messages"><i class="bi bi-chat-dots"></i></a>
        <a href="AdminUsers.html" class="active" title="Users"><i class="bi bi-people-fill"></i></a>
        <a href="AdminModeration.html" title="Moderation"><i class="bi bi-shield-check"></i></a>
        <a href="AdminSetting.html" title="Settings"><i class="bi bi-gear"></i></a>
    </aside>

    <main class="main-content">
        <div class="container-fluid p-0">
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="h3 fw-bold mb-1">User Management</h1>
                    <p class="text-muted small">Monitor account activity and enforce verification across Juba.</p>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-outline-secondary btn-sm px-3"><i class="bi bi-download me-1"></i> Export</button>
                    <button class="btn btn-primary btn-sm px-3" data-bs-toggle="modal" data-bs-target="#createUserModal"><i class="bi bi-person-plus-fill me-1"></i> Create Admin</button>
                </div>
            </div>

            <div class="row g-3 mb-4">
                <div class="col-md-3">
                    <div class="stat-mini-card shadow-sm">
                        <div class="small text-muted mb-1">Total Users</div>
                        <div class="h4 fw-bold mb-0">1,248</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-mini-card shadow-sm">
                        <div class="small text-muted mb-1">Active Brokers</div>
                        <div class="h4 fw-bold mb-0 text-primary">84</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-mini-card shadow-sm">
                        <div class="small text-muted mb-1">Unverified Accounts</div>
                        <div class="h4 fw-bold mb-0 text-warning">12</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-mini-card shadow-sm">
                        <div class="small text-muted mb-1">Banned Users</div>
                        <div class="h4 fw-bold mb-0 text-danger">3</div>
                    </div>
                </div>
            </div>

            <div id="bulkBar" class="bulk-action-bar shadow-sm d-flex justify-content-between align-items-center">
                <span class="small fw-semibold"><span id="selectedCount">0</span> users selected</span>
                <div class="d-flex gap-2">
                    <button class="btn btn-sm btn-light text-primary fw-bold px-3">Verify All</button>
                    <button class="btn btn-sm btn-outline-light px-3">Suspend</button>
                </div>
            </div>

            <div class="card border-0 shadow-sm mb-4">
                <div class="card-body">
                    <form class="row g-3 align-items-end">
                        <div class="col-md-4">
                            <label class="form-label small fw-bold">Search Directory</label>
                            <div class="input-group input-group-sm">
                                <span class="input-group-text bg-white border-end-0"><i class="bi bi-search"></i></span>
                                <input type="text" class="form-control border-start-0" placeholder="Name, Email, or Phone...">
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small fw-bold">Account Role</label>
                            <select class="form-select form-select-sm">
                                <option>All Roles</option>
                                <option>Broker</option>
                                <option>Owner</option>
                                <option>Photographer</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small fw-bold">Verification</label>
                            <select class="form-select form-select-sm">
                                <option>All</option>
                                <option>Verified</option>
                                <option>Pending</option>
                            </select>
                        </div>
                        <div class="col-md-4 text-end">
                            <button type="reset" class="btn btn-link btn-sm text-decoration-none text-muted">Clear Filters</button>
                            <button type="button" class="btn btn-dark btn-sm px-4 ms-2">Apply Filters</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="card border-0 shadow-sm overflow-hidden">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="bg-light">
                            <tr>
                                <th class="ps-4"><input type="checkbox" class="form-check-input" id="selectAll"></th>
                                <th>User Identity</th>
                                <th>Role</th>
                                <th>Verification</th>
                                <th>Status</th>
                                <th class="text-end pe-4">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="ps-4"><input type="checkbox" class="form-check-input user-check"></td>
                                <td>
                                    <div class="d-flex align-items-center gap-3" onclick="location.href='AdminUserDetails.html?id=201'">
                                        <img src="https://ui-avatars.com/api/?name=John+Broker&background=0D6EFD&color=fff" class="user-avatar" alt="Avatar">
                                        <div>
                                            <div class="fw-bold">John Broker</div>
                                            <div class="small text-muted">broker@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge role-badge bg-info-subtle text-info">Broker</span></td>
                                <td><span class="text-primary small fw-bold"><i class="bi bi-patch-check-fill me-1"></i>Verified</span></td>
                                <td><span class="badge rounded-pill status-active px-3 py-2">ACTIVE</span></td>
                                <td class="text-end pe-4">
                                    <div class="dropdown">
                                        <button class="btn btn-light btn-sm" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></button>
                                        <ul class="dropdown-menu dropdown-menu-end shadow-sm">
                                            <li><a class="dropdown-item" href="AdminUserDetails.html?id=201"><i class="bi bi-eye me-2"></i> View Profile</a></li>
                                            <li><a class="dropdown-item" href="#"><i class="bi bi-pencil me-2"></i> Edit Permissions</a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-person-x me-2"></i> Suspend User</a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="ps-4"><input type="checkbox" class="form-check-input user-check"></td>
                                <td>
                                    <div class="d-flex align-items-center gap-3" onclick="location.href='AdminUserDetails.html?id=202'">
                                        <img src="https://ui-avatars.com/api/?name=Mary+Owner&background=343A40&color=fff" class="user-avatar" alt="Avatar">
                                        <div>
                                            <div class="fw-bold">Mary Owner</div>
                                            <div class="small text-muted">owner@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge role-badge bg-dark-subtle text-dark">Owner</span></td>
                                <td><span class="text-muted small fw-bold"><i class="bi bi-clock me-1"></i>Unverified</span></td>
                                <td><span class="badge rounded-pill status-active px-3 py-2">ACTIVE</span></td>
                                <td class="text-end pe-4">
                                    <div class="btn-group btn-group-sm">
                                        <button class="btn btn-outline-success">Verify Now</button>
                                        <button class="btn btn-light border" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-footer bg-white border-top-0 py-3 d-flex justify-content-between align-items-center">
                    <span class="small text-muted">Showing 1 to 50 of 1,248 accounts</span>
                    <nav>
                        <ul class="pagination pagination-sm mb-0">
                            <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">Next</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Selection Logic for Bulk Actions
    const selectAll = document.getElementById('selectAll');
    const userChecks = document.querySelectorAll('.user-check');
    const bulkBar = document.getElementById('bulkBar');
    const countDisplay = document.getElementById('selectedCount');

    function toggleBulkBar() {
        const checked = document.querySelectorAll('.user-check:checked').length;
        bulkBar.style.display = checked > 0 ? 'flex' : 'none';
        countDisplay.textContent = checked;
    }

    selectAll.addEventListener('change', (e) => {
        userChecks.forEach(cb => cb.checked = e.target.checked);
        toggleBulkBar();
    });

    userChecks.forEach(cb => {
        cb.addEventListener('change', toggleBulkBar);
    });
</script>

  <script src="assets/js/config.js"></script>
  <script src="assets/js/http.js"></script>
  <script src="assets/js/admin.js"></script>
  <script>Admin.wireComingSoon(); Admin.loadBadges(); Admin.loadPendingCounts();</script>
</body>
</html>